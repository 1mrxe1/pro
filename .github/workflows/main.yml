name: Python Bot Test

on:
  workflow_dispatch:
  schedule:
    - cron: "0 * * * *"   # ÙƒÙ„ Ø³Ø§Ø¹Ø© Ø¨Ø§Ù„Ø¶Ø¨Ø·

permissions:
  contents: write

jobs:
  run-bot:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repo
        uses: actions/checkout@v4
        with:
          fetch-depth: 0

      - name: Setup Python
        uses: actions/setup-python@v5
        with:
          python-version: "3.11"

      - name: Install dependencies
        run: |
          if [ -f requirements.txt ]; then
            pip install -r requirements.txt
          fi

      - name: Run bot with timed shutdown
        run: |
          echo "ðŸš€ Starting bot..."
          (sleep 3570 && echo "ðŸ›‘ Time is up, killing bot..." && pkill -f "python main.py") &
          # 3570 Ø«Ø§Ù†ÙŠØ© = 59 Ø¯Ù‚ÙŠÙ‚Ø© Ùˆ 30 Ø«Ø§Ù†ÙŠØ©
          python main.py
